<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <h3>Javascript and XML = Ajax</h3>
  <p>XMLHTTPRequest 기술을 사용하여 복잡하고 동적인 웹 페이지를 구성하는 프로그래밍 방식</p>
  <p>페이지를 새로고침 하지 않고도 동적으로 데이터를 불러와 화면 갱신 가능 </p>
  <ul>Ajax 목적
    <li>비동기 통신</li>
    <li>부분 업데이트</li>
    <li>서버 부하 감소</li>
  </ul>
  <p>항상 완성된 코드를 준 기존 방식과 달리</p>
  <p>새로운 페이지를 응답으로 만들지 않고 필요한 부분에 대한 데이터만 처리 후 응답</p>
  <p>서버에서 모두 처리되던 데이터 처리의 일부분이 이제는 클라 쪽에서 처리되므로 교환되는 데이터양과 처리량이 줄어듦</p>
  
  <hr>

  <h3>Axios</h3>
  <p>브라우저와 Node.js에서 사용할 수 있는 Promise 기반의 HTTP 클라이언트 라이브러리</p>
  <p>★ 주로 웹 애플리케이션에서 서버와 통신할 때 사용</p>
  <p>★ 클라이언트 및 서버사이에 HTTP 요청을 만들고 응답을 처리하는데 사용되는 자바 스크립트 라이브러리</p>
  <p>// src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js" // cdn 설치</p>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    // 1.
    // cat api 주소로 get 요청을 보내겠다 !! 
    const promiseObj = axios({
      method: 'get',
      url: 'https://api.thecatapi.com/v1/images/search'
    })

    // console.log(promiseObj) // Promise object
    
    // then()  : 작업이 성공적으로 완료 되었을 때 실행될 콜백 함수 지정
    // catch() : 작업이 실패했을 때 실행될 콜백 함수를 지정 
    //         - then()이 하나라도 실패하면 callback 실행 (남은 then은 중단)
    
    promiseObj
      .then((response) => {
        console.log(response)
        // console.log(response.data)
      })
      .catch((error) => {
        console.log(error)
      })

      console.log('안녕하세요')

    // 2.
    axios({
      method: 'get',
      url: 'https://api.thecatapi.com/v1/images/search'
    })
      .then((response) => {
        console.log(response)
        console.log(response.data)
      })
      .catch((error) => {
        console.log(error)
      })
  </script>

</body>

</html>
